'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _Utils = require('./Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _Memoize = require('./Memoize');

var _Memoize2 = _interopRequireDefault(_Memoize);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = {
  primaryAxis: function primaryAxis() {
    return (0, _Memoize2.default)(function (state) {
      return [state.axes];
    }, function (axes) {
      for (var key in axes) {
        if (axes.hasOwnProperty(key)) {
          if (axes[key].primary) {
            return axes[key];
          }
        }
      }
      return undefined;
    });
  },

  secondaryAxis: function secondaryAxis() {
    return (0, _Memoize2.default)(function (state) {
      return [state.axes];
    }, function (axes) {
      for (var key in axes) {
        if (axes.hasOwnProperty(key)) {
          if (!axes[key].primary) {
            return axes[key];
          }
        }
      }
      return undefined;
    });
  },

  offset: function offset() {
    return (0, _Memoize2.default)(function (state) {
      return [state && state.offset && state.offset.left || 0, state && state.offset && state.offset.top || 0];
    }, function (left, top) {
      return {
        left: left,
        top: top
      };
    });
  },

  gridX: function gridX() {
    return (0, _Memoize2.default)(function (state) {
      return [state && state.padding && state.padding.left || 0, state && state.axisDimensions && state.axisDimensions.left && state.axisDimensions.left.width || 0, state && state.axisDimensions && state.axisDimensions.top && state.axisDimensions.top.left || 0, state && state.axisDimensions && state.axisDimensions.bottom && state.axisDimensions.bottom.left || 0];
    }, function (paddingLeft, axesLeftWidth, axesTopLeft, axesBottomLeft) {
      return paddingLeft + Math.max(axesLeftWidth, axesTopLeft, axesBottomLeft);
    });
  },

  gridY: function gridY() {
    return (0, _Memoize2.default)(function (state) {
      return [state && state.padding && state.padding.top || 0, state && state.axisDimensions && state.axisDimensions.top && state.axisDimensions.top.height || 0, state && state.axisDimensions && state.axisDimensions.left && state.axisDimensions.left.top || 0, state && state.axisDimensions && state.axisDimensions.right && state.axisDimensions.right.top || 0];
    }, function (paddingTop, axesTopHeight, axesLeftTop, axesRightTop) {
      return paddingTop + Math.max(axesTopHeight, axesLeftTop, axesRightTop);
    });
  },

  gridWidth: function gridWidth() {
    return (0, _Memoize2.default)(function (state) {
      return [state && state.width && state.width || 0, state && state.padding && state.padding.left || 0, state && state.padding && state.padding.right || 0, state && state.axisDimensions && state.axisDimensions.left && state.axisDimensions.left.width || 0, state && state.axisDimensions && state.axisDimensions.right && state.axisDimensions.right.width || 0, state && state.axisDimensions && state.axisDimensions.top && state.axisDimensions.top.left || 0, state && state.axisDimensions && state.axisDimensions.top && state.axisDimensions.top.right || 0, state && state.axisDimensions && state.axisDimensions.bottom && state.axisDimensions.bottom.left || 0, state && state.axisDimensions && state.axisDimensions.bottom && state.axisDimensions.bottom.right || 0];
    }, function (width, paddingLeft, paddingRight, axesLeftWidth, axesRightWidth, axesTopLeft, axesTopRight, axesBottomLeft, axesBottomRight) {
      return width - paddingLeft - paddingRight - Math.max(axesLeftWidth, axesTopLeft, axesBottomLeft) - Math.max(axesRightWidth, axesTopRight, axesBottomRight);
    });
  },

  gridHeight: function gridHeight() {
    return (0, _Memoize2.default)(function (state) {
      return [state && state.height || 0, state && state.padding && state.padding.top || 0, state && state.padding && state.padding.bottom || 0, state && state.axisDimensions && state.axisDimensions.top && state.axisDimensions.top.height || 0, state && state.axisDimensions && state.axisDimensions.bottom && state.axisDimensions.bottom.height || 0, state && state.axisDimensions && state.axisDimensions.left && state.axisDimensions.left.top || 0, state && state.axisDimensions && state.axisDimensions.left && state.axisDimensions.left.bottom || 0, state && state.axisDimensions && state.axisDimensions.right && state.axisDimensions.right.top || 0, state && state.axisDimensions && state.axisDimensions.right && state.axisDimensions.right.bottom || 0];
    }, function (height, paddingTop, paddingBottom, axesTopHeight, axesBottomHeight, axesLeftTop, axesLeftBottom, axesRightTop, axesRightBottom) {
      return height - paddingTop - paddingBottom - Math.max(axesTopHeight, axesLeftTop, axesRightTop) - Math.max(axesBottomHeight, axesLeftBottom, axesRightBottom);
    });
  }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9TZWxlY3RvcnMuanMiXSwibmFtZXMiOlsicHJpbWFyeUF4aXMiLCJzdGF0ZSIsImF4ZXMiLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsInByaW1hcnkiLCJ1bmRlZmluZWQiLCJzZWNvbmRhcnlBeGlzIiwib2Zmc2V0IiwibGVmdCIsInRvcCIsImdyaWRYIiwicGFkZGluZyIsImF4aXNEaW1lbnNpb25zIiwid2lkdGgiLCJib3R0b20iLCJwYWRkaW5nTGVmdCIsImF4ZXNMZWZ0V2lkdGgiLCJheGVzVG9wTGVmdCIsImF4ZXNCb3R0b21MZWZ0IiwiTWF0aCIsIm1heCIsImdyaWRZIiwiaGVpZ2h0IiwicmlnaHQiLCJwYWRkaW5nVG9wIiwiYXhlc1RvcEhlaWdodCIsImF4ZXNMZWZ0VG9wIiwiYXhlc1JpZ2h0VG9wIiwiZ3JpZFdpZHRoIiwicGFkZGluZ1JpZ2h0IiwiYXhlc1JpZ2h0V2lkdGgiLCJheGVzVG9wUmlnaHQiLCJheGVzQm90dG9tUmlnaHQiLCJncmlkSGVpZ2h0IiwicGFkZGluZ0JvdHRvbSIsImF4ZXNCb3R0b21IZWlnaHQiLCJheGVzTGVmdEJvdHRvbSIsImF4ZXNSaWdodEJvdHRvbSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7Ozs7QUFDQTs7Ozs7O2tCQUVlO0FBQ2JBLGVBQWE7QUFBQSxXQUFNLHVCQUFRO0FBQUEsYUFBUyxDQUNsQ0MsTUFBTUMsSUFENEIsQ0FBVDtBQUFBLEtBQVIsRUFFaEIsZ0JBQVE7QUFDVCxXQUFLLElBQUlDLEdBQVQsSUFBZ0JELElBQWhCLEVBQXNCO0FBQ3BCLFlBQUlBLEtBQUtFLGNBQUwsQ0FBb0JELEdBQXBCLENBQUosRUFBOEI7QUFDNUIsY0FBSUQsS0FBS0MsR0FBTCxFQUFVRSxPQUFkLEVBQXVCO0FBQ3JCLG1CQUFPSCxLQUFLQyxHQUFMLENBQVA7QUFDRDtBQUNGO0FBQ0Y7QUFDRCxhQUFPRyxTQUFQO0FBQ0QsS0FYa0IsQ0FBTjtBQUFBLEdBREE7O0FBY2JDLGlCQUFlO0FB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QkosSUFBckIsQ0FBMEJNLE1BQXhGLElBQWtHLENBUGpFLEVBUWpDZCxTQUFTQSxNQUFNWSxjQUFmLElBQWlDWixNQUFNWSxjQUFOLENBQXFCVyxLQUF0RCxJQUErRHZCLE1BQU1ZLGNBQU4sQ0FBcUJXLEtBQXJCLENBQTJCZCxHQUExRixJQUFpRyxDQVJoRSxFQVNqQ1QsU0FBU0EsTUFBTVksY0FBZixJQUFpQ1osTUFBTVksY0FBTixDQUFxQlcsS0FBdEQsSUFBK0R2QixNQUFNWSxjQUFOLENBQXFCVyxLQUFyQixDQUEyQlQsTUFBMUYsSUFBb0csQ0FUbkUsQ0FBVDtBQUFBLEtBQVIsRUFVZixVQUNEUSxNQURDLEVBRURFLFVBRkMsRUFHRFUsYUFIQyxFQUlEVCxhQUpDLEVBS0RVLGdCQUxDLEVBTURULFdBTkMsRUFPRFUsY0FQQyxFQVFEVCxZQVJDLEVBU0RVLGVBVEMsRUFVRTtBQUNILGFBQU9mLFNBQ0xFLFVBREssR0FFTFUsYUFGSyxHQUdMZixLQUFLQyxHQUFMLENBQVNLLGFBQVQsRUFBd0JDLFdBQXhCLEVBQXFDQyxZQUFyQyxDQUhLLEdBSUxSLEtBQUtDLEdBQUwsQ0FBU2UsZ0JBQVQsRUFBMkJDLGNBQTNCLEVBQTJDQyxlQUEzQyxDQUpGO0FBS0QsS0ExQmlCLENBQU47QUFBQTtBQWhHQyxDIiwiZmlsZSI6IlNlbGVjdG9ycy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJy4vVXRpbHMnXG5pbXBvcnQgTWVtb2l6ZSBmcm9tICcuL01lbW9pemUnXG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJpbWFyeUF4aXM6ICgpID0+IE1lbW9pemUoc3RhdGUgPT4gW1xuICAgIHN0YXRlLmF4ZXNcbiAgXSwgYXhlcyA9PiB7XG4gICAgZm9yICh2YXIga2V5IGluIGF4ZXMpIHtcbiAgICAgIGlmIChheGVzLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgaWYgKGF4ZXNba2V5XS5wcmltYXJ5KSB7XG4gICAgICAgICAgcmV0dXJuIGF4ZXNba2V5XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfSksXG5cbiAgc2Vjb25kYXJ5QXhpczogKCkgPT4gTWVtb2l6ZShzdGF0ZSA9PiBbXG4gICAgc3RhdGUuYXhlc1xuICBdLCBheGVzID0+IHtcbiAgICBmb3IgKHZhciBrZXkgaW4gYXhlcykge1xuICAgICAgaWYgKGF4ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICBpZiAoIWF4ZXNba2V5XS5wcmltYXJ5KSB7XG4gICAgICAgICAgcmV0dXJuIGF4ZXNba2V5XVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWRcbiAgfSksXG5cbiAgb2Zmc2V0OiAoKSA9PiBNZW1vaXplKHN0YXRlID0+IFtcbiAgICBzdGF0ZSAmJiBzdGF0ZS5vZmZzZXQgJiYgc3RhdGUub2Zmc2V0LmxlZnQgfHwgMCxcbiAgICBzdGF0ZSAmJiBzdGF0ZS5vZmZzZXQgJiYgc3RhdGUub2Zmc2V0LnRvcCB8fCAwXG4gIF0sIChcbiAgICBsZWZ0LFxuICAgIHRvcFxuICApID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVmdCxcbiAgICAgIHRvcFxuICAgIH1cbiAgfSksXG5cbiAgZ3JpZFg6ICgpID0+IE1lbW9pemUoc3RhdGUgPT4gW1xuICAgIHN0YXRlICYmIHN0YXRlLnBhZGRpbmcgJiYgc3RhdGUucGFkZGluZy5sZWZ0IHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMubGVmdCAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucy5sZWZ0LndpZHRoIHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMudG9wICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLnRvcC5sZWZ0IHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMuYm90dG9tICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLmJvdHRvbS5sZWZ0IHx8IDBcbiAgXSwgKFxuICAgIHBhZGRpbmdMZWZ0LFxuICAgIGF4ZXNMZWZ0V2lkdGgsXG4gICAgYXhlc1RvcExlZnQsXG4gICAgYXhlc0JvdHRvbUxlZnRcbiAgKSA9PiB7XG4gICAgcmV0dXJuIHBhZGRpbmdMZWZ0ICsgTWF0aC5tYXgoYXhlc0xlZnRXaWR0aCwgYXhlc1RvcExlZnQsIGF4ZXNCb3R0b21MZWZ0KVxuICB9KSxcblxuICBncmlkWTogKCkgPT4gTWVtb2l6ZShzdGF0ZSA9PiBbXG4gICAgc3RhdGUgJiYgc3RhdGUucGFkZGluZyAmJiBzdGF0ZS5wYWRkaW5nLnRvcCB8fCAwLFxuICAgIHN0YXRlICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLnRvcCAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucy50b3AuaGVpZ2h0IHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMubGVmdCAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucy5sZWZ0LnRvcCB8fCAwLFxuICAgIHN0YXRlICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLnJpZ2h0ICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLnJpZ2h0LnRvcCB8fCAwXG4gIF0sIChcbiAgICBwYWRkaW5nVG9wLFxuICAgIGF4ZXNUb3BIZWlnaHQsXG4gICAgYXhlc0xlZnRUb3AsXG4gICAgYXhlc1JpZ2h0VG9wXG4gICkgPT4ge1xuICAgIHJldHVybiBwYWRkaW5nVG9wICsgTWF0aC5tYXgoYXhlc1RvcEhlaWdodCwgYXhlc0xlZnRUb3AsIGF4ZXNSaWdodFRvcClcbiAgfSksXG5cbiAgZ3JpZFdpZHRoOiAoKSA9PiBNZW1vaXplKHN0YXRlID0+IFtcbiAgICBzdGF0ZSAmJiBzdGF0ZS53aWR0aCAmJiBzdGF0ZS53aWR0aCB8fCAwLFxuICAgIHN0YXRlICYmIHN0YXRlLnBhZGRpbmcgJiYgc3RhdGUucGFkZGluZy5sZWZ0IHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUucGFkZGluZyAmJiBzdGF0ZS5wYWRkaW5nLnJpZ2h0IHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMubGVmdCAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucy5sZWZ0LndpZHRoIHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMucmlnaHQgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMucmlnaHQud2lkdGggfHwgMCxcbiAgICBzdGF0ZSAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucyAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucy50b3AgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMudG9wLmxlZnQgfHwgMCxcbiAgICBzdGF0ZSAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucyAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucy50b3AgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMudG9wLnJpZ2h0IHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMuYm90dG9tICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLmJvdHRvbS5sZWZ0IHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMuYm90dG9tICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLmJvdHRvbS5yaWdodCB8fCAwXG4gIF0sIChcbiAgICB3aWR0aCxcbiAgICBwYWRkaW5nTGVmdCxcbiAgICBwYWRkaW5nUmlnaHQsXG4gICAgYXhlc0xlZnRXaWR0aCxcbiAgICBheGVzUmlnaHRXaWR0aCxcbiAgICBheGVzVG9wTGVmdCxcbiAgICBheGVzVG9wUmlnaHQsXG4gICAgYXhlc0JvdHRvbUxlZnQsXG4gICAgYXhlc0JvdHRvbVJpZ2h0LFxuICApID0+IHtcbiAgICByZXR1cm4gd2lkdGggLVxuICAgICAgcGFkZGluZ0xlZnQgLVxuICAgICAgcGFkZGluZ1JpZ2h0IC1cbiAgICAgIE1hdGgubWF4KGF4ZXNMZWZ0V2lkdGgsIGF4ZXNUb3BMZWZ0LCBheGVzQm90dG9tTGVmdCkgLVxuICAgICAgTWF0aC5tYXgoYXhlc1JpZ2h0V2lkdGgsIGF4ZXNUb3BSaWdodCwgYXhlc0JvdHRvbVJpZ2h0KVxuICB9KSxcblxuICBncmlkSGVpZ2h0OiAoKSA9PiBNZW1vaXplKHN0YXRlID0+IFtcbiAgICBzdGF0ZSAmJiBzdGF0ZS5oZWlnaHQgfHwgMCxcbiAgICBzdGF0ZSAmJiBzdGF0ZS5wYWRkaW5nICYmIHN0YXRlLnBhZGRpbmcudG9wIHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUucGFkZGluZyAmJiBzdGF0ZS5wYWRkaW5nLmJvdHRvbSB8fCAwLFxuICAgIHN0YXRlICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLnRvcCAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucy50b3AuaGVpZ2h0IHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMuYm90dG9tICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLmJvdHRvbS5oZWlnaHQgfHwgMCxcbiAgICBzdGF0ZSAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucyAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucy5sZWZ0ICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLmxlZnQudG9wIHx8IDAsXG4gICAgc3RhdGUgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMgJiYgc3RhdGUuYXhpc0RpbWVuc2lvbnMubGVmdCAmJiBzdGF0ZS5heGlzRGltZW5zaW9ucy5sZWZ0LmJvdHRvbSB8fCAwLFxuICAgIHN0YXRlICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLnJpZ2h0ICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLnJpZ2h0LnRvcCB8fCAwLFxuICAgIHN0YXRlICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLnJpZ2h0ICYmIHN0YXRlLmF4aXNEaW1lbnNpb25zLnJpZ2h0LmJvdHRvbSB8fCAwXG4gIF0sIChcbiAgICBoZWlnaHQsXG4gICAgcGFkZGluZ1RvcCxcbiAgICBwYWRkaW5nQm90dG9tLFxuICAgIGF4ZXNUb3BIZWlnaHQsXG4gICAgYXhlc0JvdHRvbUhlaWdodCxcbiAgICBheGVzTGVmdFRvcCxcbiAgICBheGVzTGVmdEJvdHRvbSxcbiAgICBheGVzUmlnaHRUb3AsXG4gICAgYXhlc1JpZ2h0Qm90dG9tLFxuICApID0+IHtcbiAgICByZXR1cm4gaGVpZ2h0IC1cbiAgICAgIHBhZGRpbmdUb3AgLVxuICAgICAgcGFkZGluZ0JvdHRvbSAtXG4gICAgICBNYXRoLm1heChheGVzVG9wSGVpZ2h0LCBheGVzTGVmdFRvcCwgYXhlc1JpZ2h0VG9wKSAtXG4gICAgICBNYXRoLm1heChheGVzQm90dG9tSGVpZ2h0LCBheGVzTGVmdEJvdHRvbSwgYXhlc1JpZ2h0Qm90dG9tKVxuICB9KVxufVxuIl19