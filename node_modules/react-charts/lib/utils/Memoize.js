"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = Memo;

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

function Memo() {
  var getParams = function getParams() {
    for (var _len = arguments.length, subArgs = Array(_len), _key = 0; _key < _len; _key++) {
      subArgs[_key] = arguments[_key];
    }

    return subArgs;
  };
  var fn = arguments.length <= 0 ? undefined : arguments[0];
  if (arguments.length > 1) {
    getParams = arguments.length <= 0 ? undefined : arguments[0];
    fn = arguments.length <= 1 ? undefined : arguments[1];
  }
  var params = [];
  var value = void 0;

  return function () {
    for (var _len2 = arguments.length, p = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      p[_key2] = arguments[_key2];
    }

    var newParams = getParams.apply(undefined, p);
    var recompute = function recompute() {
      params = newParams;
      value = fn.apply(undefined, _toConsumableArray(params));
      return value;
    };

    if (newParams.length !== p.length) {
      return recompute();
    }

    for (var i = 0; i < newParams.length; i++) {
      if (newParams[i] !== p[i]) {
        return recompute();
      }
    }

    return value;
  };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlscy9NZW1vaXplLmpzIl0sIm5hbWVzIjpbIk1lbW8iLCJnZXRQYXJhbXMiLCJzdWJBcmdzIiwiZm4iLCJsZW5ndGgiLCJwYXJhbXMiLCJ2YWx1ZSIsInAiLCJuZXdQYXJhbXMiLCJyZWNvbXB1dGUiLCJpIl0sIm1hcHBpbmdzIjoiOzs7OztrQkFBd0JBLEk7Ozs7QUFBVCxTQUFTQSxJQUFULEdBQXdCO0FBQ3JDLE1BQUlDLFlBQVk7QUFBQSxzQ0FBSUMsT0FBSjtBQUFJQSxhQUFKO0FBQUE7O0FBQUEsV0FBZ0JBLE9BQWhCO0FBQUEsR0FBaEI7QUFDQSxNQUFJQyxxREFBSjtBQUNBLE1BQUksVUFBS0MsTUFBTCxHQUFjLENBQWxCLEVBQXFCO0FBQ25CSDtBQUNBRTtBQUNEO0FBQ0QsTUFBSUUsU0FBUyxFQUFiO0FBQ0EsTUFBSUMsY0FBSjs7QUFFQSxTQUFPLFlBQVU7QUFBQSx1Q0FBTkMsQ0FBTTtBQUFOQSxPQUFNO0FBQUE7O0FBQ2YsUUFBTUMsWUFBWVAsMkJBQWFNLENBQWIsQ0FBbEI7QUFDQSxRQUFNRSxZQUFZLFNBQVpBLFNBQVksR0FBTTtBQUN0QkosZUFBU0csU0FBVDtBQUNBRixjQUFRSCx1Q0FBTUUsTUFBTixFQUFSO0FBQ0EsYUFBT0MsS0FBUDtBQUNELEtBSkQ7O0FBTUEsUUFBSUUsVUFBVUosTUFBVixLQUFxQkcsRUFBRUgsTUFBM0IsRUFBbUM7QUFDakMsYUFBT0ssV0FBUDtBQUNEOztBQUVELFNBQUssSUFBSUMsSUFBSSxDQUFiLEVBQWdCQSxJQUFJRixVQUFVSixNQUE5QixFQUFzQ00sR0FBdEMsRUFBMkM7QUFDekMsVUFBSUYsVUFBVUUsQ0FBVixNQUFpQkgsRUFBRUcsQ0FBRixDQUFyQixFQUEyQjtBQUN6QixlQUFPRCxXQUFQO0FBQ0Q7QUFDRjs7QUFFRCxXQUFPSCxLQUFQO0FBQ0QsR0FuQkQ7QUFvQkQiLCJmaWxlIjoiTWVtb2l6ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIE1lbW8gKC4uLmFyZ3MpIHtcbiAgbGV0IGdldFBhcmFtcyA9ICguLi5zdWJBcmdzKSA9PiBzdWJBcmdzXG4gIGxldCBmbiA9IGFyZ3NbMF1cbiAgaWYgKGFyZ3MubGVuZ3RoID4gMSkge1xuICAgIGdldFBhcmFtcyA9IGFyZ3NbMF1cbiAgICBmbiA9IGFyZ3NbMV1cbiAgfVxuICBsZXQgcGFyYW1zID0gW11cbiAgbGV0IHZhbHVlXG5cbiAgcmV0dXJuICguLi5wKSA9PiB7XG4gICAgY29uc3QgbmV3UGFyYW1zID0gZ2V0UGFyYW1zKC4uLnApXG4gICAgY29uc3QgcmVjb21wdXRlID0gKCkgPT4ge1xuICAgICAgcGFyYW1zID0gbmV3UGFyYW1zXG4gICAgICB2YWx1ZSA9IGZuKC4uLnBhcmFtcylcbiAgICAgIHJldHVybiB2YWx1ZVxuICAgIH1cblxuICAgIGlmIChuZXdQYXJhbXMubGVuZ3RoICE9PSBwLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHJlY29tcHV0ZSgpXG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuZXdQYXJhbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChuZXdQYXJhbXNbaV0gIT09IHBbaV0pIHtcbiAgICAgICAgcmV0dXJuIHJlY29tcHV0ZSgpXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cbn1cbiJdfQ==