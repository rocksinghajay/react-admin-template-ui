'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactState = require('react-state');

var _Selectors = require('../utils/Selectors');

var _Selectors2 = _interopRequireDefault(_Selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
//


// import Rectangle from '../primitives/Rectangle'

var Brush = function (_PureComponent) {
  _inherits(Brush, _PureComponent);

  function Brush() {
    _classCallCheck(this, Brush);

    return _possibleConstructorReturn(this, (Brush.__proto__ || Object.getPrototypeOf(Brush)).apply(this, arguments));
  }

  _createClass(Brush, [{
    key: 'componentWillReceiveProps',
    value: function componentWillReceiveProps(nextProps) {
      var _props = this.props,
          onSelect = _props.onSelect,
          cursor = _props.cursor,
          primaryAxis = _props.primaryAxis;

      if (this.props.cursor && nextProps.cursor.released !== this.props.cursor.released) {
        onSelect({
          cursor: nextProps.cursor.released,
          start: primaryAxis.scale.invert(cursor.sourceX),
          end: primaryAxis.scale.invert(cursor.x)
        });
      }
    }
  }, {
    key: 'render',
    value: function render() {
      var _props2 = this.props,
          _props2$cursor = _props2.cursor,
          cursor = _props2$cursor === undefined ? {} : _props2$cursor,
          offset = _props2.offset,
          gridX = _props2.gridX,
          gridY = _props2.gridY,
          gridHeight = _props2.gridHeight;


      return _react2.default.createElement(
        'div',
        {
          className: 'Brush',
          style: {
            pointerEvents: 'none',
            position: 'absolute',
            left: offset.left + gridX + 'px',
            top: offset.top + gridY + 'px',
            opacity: !cursor.dragging ? 0 : 1
          }
        },
        _react2.default.createElement('div', {
          style: {
            position: 'absolute',
            left: Math.min(cursor.x, cursor.sourceX) + 'px',
            width: Math.abs(cursor.x - cursor.sourceX) + 'px',
            height: gridHeight + 'px',
            background: 'rgba(0,0,0,.2)'
          }
        })
      );
    }
  }]);

  return Brush;
}(_react.PureComponent);

Brush.defaultProps = {
  onSelect: function onSelect() {}
};
exports.default = (0, _reactState.Connect)(function (state) {
  var selectors = {
    primaryAxis: _Selectors2.default.primaryAxis(),
    secondaryAxis: _Selectors2.default.secondaryAxis(),
    offset: _Selectors2.default.offset(),
    gridHeight: _Selectors2.default.gridHeight(),
    gridX: _Selectors2.default.gridX(),
    gridY: _Selectors2.default.gridY()
  };
  return function (state) {
    return {
      primaryAxis: selectors.primaryAxis(state),
      secondaryAxis: selectors.secondaryAxis(state),
      cursor: state.cursor,
      offset: selectors.offset(state),
      gridHeight: selectors.gridHeight(state),
      gridX: selectors.gridX(state),
      gridY: selectors.gridY(state)
    };
  };
}, {
  statics: {
    isHTML: true
  }
})(Brush);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL0JydXNoLmpzIl0sIm5hbWVzIjpbIkJydXNoIiwibmV4dFByb3BzIiwicHJvcHMiLCJvblNlbGVjdCIsImN1cnNvciIsInByaW1hcnlBeGlzIiwicmVsZWFzZWQiLCJzdGFydCIsInNjYWxlIiwiaW52ZXJ0Iiwic291cmNlWCIsImVuZCIsIngiLCJvZmZzZXQiLCJncmlkWCIsImdyaWRZIiwiZ3JpZEhlaWdodCIsInBvaW50ZXJFdmVudHMiLCJwb3NpdGlvbiIsImxlZnQiLCJ0b3AiLCJvcGFjaXR5IiwiZHJhZ2dpbmciLCJNYXRoIiwibWluIiwid2lkdGgiLCJhYnMiLCJoZWlnaHQiLCJiYWNrZ3JvdW5kIiwiZGVmYXVsdFByb3BzIiwic2VsZWN0b3JzIiwic2Vjb25kYXJ5QXhpcyIsInN0YXRlIiwic3RhdGljcyIsImlzSFRNTCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBQTs7OztBQUNBOztBQUVBOzs7Ozs7Ozs7OztBQURBOzs7QUFFQTs7SUFFTUEsSzs7Ozs7Ozs7Ozs7OENBSXVCQyxTLEVBQVc7QUFBQSxtQkFDTSxLQUFLQyxLQURYO0FBQUEsVUFDNUJDLFFBRDRCLFVBQzVCQSxRQUQ0QjtBQUFBLFVBQ2xCQyxNQURrQixVQUNsQkEsTUFEa0I7QUFBQSxVQUNWQyxXQURVLFVBQ1ZBLFdBRFU7O0FBRXBDLFVBQ0UsS0FBS0gsS0FBTCxDQUFXRSxNQUFYLElBQ0FILFVBQVVHLE1BQVYsQ0FBaUJFLFFBQWpCLEtBQThCLEtBQUtKLEtBQUwsQ0FBV0UsTUFBWCxDQUFrQkUsUUFGbEQsRUFHRTtBQUNBSCxpQkFBUztBQUNQQyxrQkFBUUgsVUFBVUcsTUFBVixDQUFpQkUsUUFEbEI7QUFFUEMsaUJBQU9GLFlBQVlHLEtBQVosQ0FBa0JDLE1BQWxCLENBQXlCTCxPQUFPTSxPQUFoQyxDQUZBO0FBR1BDLGVBQUtOLFlBQVlHLEtBQVosQ0FBa0JDLE1BQWxCLENBQXlCTCxPQUFPUSxDQUFoQztBQUhFLFNBQVQ7QUFLRDtBQUNGOzs7NkJBQ1M7QUFBQSxvQkFDa0QsS0FBS1YsS0FEdkQ7QUFBQSxtQ0FDQUUsTUFEQTtBQUFBLFVBQ0FBLE1BREEsa0NBQ1MsRUFEVDtBQUFBLFVBQ2FTLE1BRGIsV0FDYUEsTUFEYjtBQUFBLFVBQ3FCQyxLQURyQixXQUNxQkEsS0FEckI7QUFBQSxVQUM0QkMsS0FENUIsV0FDNEJBLEtBRDVCO0FBQUEsVUFDbUNDLFVBRG5DLFdBQ21DQSxVQURuQzs7O0FBR1IsYUFDRTtBQUFBO0FBQUE7QUFDRSxxQkFBVSxPQURaO0FBRUUsaUJBQU87QUFDTEMsMkJBQWUsTUFEVjtBQUVMQyxzQkFBVSxVQUZMO0FBR0xDLGtCQUFTTixPQUFPTSxJQUFQLEdBQWNMLEtBQXZCLE9BSEs7QUFJTE0saUJBQVFQLE9BQU9PLEdBQVAsR0FBYUwsS0FBckIsT0FKSztBQUtMTSxxQkFBUyxDQUFDakIsT0FBT2tCLFFBQVIsR0FBbUIsQ0FBbkIsR0FBdUI7QUFMM0I7QUFGVDtBQVVFO0FBQ0UsaUJBQU87QUFDTEosc0JBQVUsVUFETDtBQUVMQyxrQkFBU0ksS0FBS0MsR0FBTCxDQUFTcEIsT0FBT1EsQ0FBaEIsRUFBbUJSLE9BQU9NLE9BQTFCLENBQVQsT0FGSztBQUdMZSxtQkFBVUYsS0FBS0csR0FBTCxDQUFTdEIsT0FBT1EsQ0FBUCxHQUFXUixPQUFPTSxPQUEzQixDQUFWLE9BSEs7QUFJTGlCLG9CQUFXWCxVQUFYLE9BSks7QUFLTFksd0JBQVk7QUFMUDtBQURUO0FBVkYsT0FERjtBQXNCRDs7Ozs7O0FBMUNHNUIsSyxDQUNHNkIsWSxHQUFlO0FBQ3BCMUIsWUFBVSxvQkFBTSxDQUFFO0FBREUsQztrQkE0Q1QseUJBQ2IsaUJBQVM7QUFDUCxNQUFNMkIsWUFBWTtBQUNoQnpCLGlCQUFhLG9CQUFVQSxXQUFWLEVBREc7QUFFaEIwQixtQkFBZSxvQkFBVUEsYUFBVixFQUZDO0FBR2hCbEIsWUFBUSxvQkFBVUEsTUFBVixFQUhRO0FBSWhCRyxnQkFBWSxvQkFBVUEsVUFBVixFQUpJO0FBS2hCRixXQUFPLG9CQUFVQSxLQUFWLEVBTFM7QUFNaEJDLFdBQU8sb0JBQVVBLEtBQVY7QUFOUyxHQUFsQjtBQVFBLFNBQU87QUFBQSxXQUFVO0FBQ2ZWLG1CQUFheUIsVUFBVXpCLFdBQVYsQ0FBc0IyQixLQUF0QixDQURFO0FBRWZELHFCQUFlRCxVQUFVQyxhQUFWLENBQXdCQyxLQUF4QixDQUZBO0FBR2Y1QixjQUFRNEIsTUFBTTVCLE1BSEM7QUFJZlMsY0FBUWlCLFVBQVVqQixNQUFWLENBQWlCbUIsS0FBakIsQ0FKTztBQUtmaEIsa0JBQVljLFVBQVVkLFVBQVYsQ0FBcUJnQixLQUFyQixDQUxHO0FBTWZsQixhQUFPZ0IsVUFBVWhCLEtBQVYsQ0FBZ0JrQixLQUFoQixDQU5RO0FBT2ZqQixhQUFPZSxVQUFVZixLQUFWLENBQWdCaUIsS0FBaEI7QUFQUSxLQUFWO0FBQUEsR0FBUDtBQVNELENBbkJZLEVBb0JiO0FBQ0VDLFdBQVM7QUFDUEMsWUFBUTtBQUREO0FBRFgsQ0FwQmEsRUF5QmJsQyxLQXpCYSxDIiwiZmlsZSI6IkJydXNoLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IENvbm5lY3QgfSBmcm9tICdyZWFjdC1zdGF0ZSdcbi8vXG5pbXBvcnQgU2VsZWN0b3JzIGZyb20gJy4uL3V0aWxzL1NlbGVjdG9ycydcbi8vIGltcG9ydCBSZWN0YW5nbGUgZnJvbSAnLi4vcHJpbWl0aXZlcy9SZWN0YW5nbGUnXG5cbmNsYXNzIEJydXNoIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgb25TZWxlY3Q6ICgpID0+IHt9LFxuICB9XG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG5leHRQcm9wcykge1xuICAgIGNvbnN0IHsgb25TZWxlY3QsIGN1cnNvciwgcHJpbWFyeUF4aXMgfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoXG4gICAgICB0aGlzLnByb3BzLmN1cnNvciAmJlxuICAgICAgbmV4dFByb3BzLmN1cnNvci5yZWxlYXNlZCAhPT0gdGhpcy5wcm9wcy5jdXJzb3IucmVsZWFzZWRcbiAgICApIHtcbiAgICAgIG9uU2VsZWN0KHtcbiAgICAgICAgY3Vyc29yOiBuZXh0UHJvcHMuY3Vyc29yLnJlbGVhc2VkLFxuICAgICAgICBzdGFydDogcHJpbWFyeUF4aXMuc2NhbGUuaW52ZXJ0KGN1cnNvci5zb3VyY2VYKSxcbiAgICAgICAgZW5kOiBwcmltYXJ5QXhpcy5zY2FsZS5pbnZlcnQoY3Vyc29yLngpLFxuICAgICAgfSlcbiAgICB9XG4gIH1cbiAgcmVuZGVyICgpIHtcbiAgICBjb25zdCB7IGN1cnNvciA9IHt9LCBvZmZzZXQsIGdyaWRYLCBncmlkWSwgZ3JpZEhlaWdodCB9ID0gdGhpcy5wcm9wc1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3NOYW1lPSdCcnVzaCdcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgbGVmdDogYCR7b2Zmc2V0LmxlZnQgKyBncmlkWH1weGAsXG4gICAgICAgICAgdG9wOiBgJHtvZmZzZXQudG9wICsgZ3JpZFl9cHhgLFxuICAgICAgICAgIG9wYWNpdHk6ICFjdXJzb3IuZHJhZ2dpbmcgPyAwIDogMSxcbiAgICAgICAgfX1cbiAgICAgID5cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIGxlZnQ6IGAke01hdGgubWluKGN1cnNvci54LCBjdXJzb3Iuc291cmNlWCl9cHhgLFxuICAgICAgICAgICAgd2lkdGg6IGAke01hdGguYWJzKGN1cnNvci54IC0gY3Vyc29yLnNvdXJjZVgpfXB4YCxcbiAgICAgICAgICAgIGhlaWdodDogYCR7Z3JpZEhlaWdodH1weGAsXG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLDAsMCwuMiknLFxuICAgICAgICAgIH19XG4gICAgICAgIC8+XG4gICAgICA8L2Rpdj5cbiAgICApXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29ubmVjdChcbiAgc3RhdGUgPT4ge1xuICAgIGNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgICAgIHByaW1hcnlBeGlzOiBTZWxlY3RvcnMucHJpbWFyeUF4aXMoKSxcbiAgICAgIHNlY29uZGFyeUF4aXM6IFNlbGVjdG9ycy5zZWNvbmRhcnlBeGlzKCksXG4gICAgICBvZmZzZXQ6IFNlbGVjdG9ycy5vZmZzZXQoKSxcbiAgICAgIGdyaWRIZWlnaHQ6IFNlbGVjdG9ycy5ncmlkSGVpZ2h0KCksXG4gICAgICBncmlkWDogU2VsZWN0b3JzLmdyaWRYKCksXG4gICAgICBncmlkWTogU2VsZWN0b3JzLmdyaWRZKCksXG4gICAgfVxuICAgIHJldHVybiBzdGF0ZSA9PiAoe1xuICAgICAgcHJpbWFyeUF4aXM6IHNlbGVjdG9ycy5wcmltYXJ5QXhpcyhzdGF0ZSksXG4gICAgICBzZWNvbmRhcnlBeGlzOiBzZWxlY3RvcnMuc2Vjb25kYXJ5QXhpcyhzdGF0ZSksXG4gICAgICBjdXJzb3I6IHN0YXRlLmN1cnNvcixcbiAgICAgIG9mZnNldDogc2VsZWN0b3JzLm9mZnNldChzdGF0ZSksXG4gICAgICBncmlkSGVpZ2h0OiBzZWxlY3RvcnMuZ3JpZEhlaWdodChzdGF0ZSksXG4gICAgICBncmlkWDogc2VsZWN0b3JzLmdyaWRYKHN0YXRlKSxcbiAgICAgIGdyaWRZOiBzZWxlY3RvcnMuZ3JpZFkoc3RhdGUpLFxuICAgIH0pXG4gIH0sXG4gIHtcbiAgICBzdGF0aWNzOiB7XG4gICAgICBpc0hUTUw6IHRydWUsXG4gICAgfSxcbiAgfVxuKShCcnVzaClcbiJdfQ==