'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactState = require('react-state');

var _reactMove = require('react-move');

var _Utils = require('../utils/Utils');

var _Utils2 = _interopRequireDefault(_Utils);

var _interactionMethods = require('../utils/interactionMethods');

var _Circle = require('../primitives/Circle');

var _Circle2 = _interopRequireDefault(_Circle);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

//


var circleDefaultStyle = {
  r: 2
};

var Line = function (_PureComponent) {
  _inherits(Line, _PureComponent);

  function Line() {
    _classCallCheck(this, Line);

    var _this = _possibleConstructorReturn(this, (Line.__proto__ || Object.getPrototypeOf(Line)).call(this));

    _this.selectSeries = _interactionMethods.selectSeries.bind(_this);
    _this.hoverSeries = _interactionMethods.hoverSeries.bind(_this);
    _this.selectDatum = _interactionMethods.selectDatum.bind(_this);
    _this.hoverDatum = _interactionMethods.hoverDatum.bind(_this);
    return _this;
  }

  _createClass(Line, [{
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props = this.props,
          series = _props.series,
          visibility = _props.visibility,
          selected = _props.selected,
          hovered = _props.hovered,
          interaction = _props.interaction;


      var status = _Utils2.default.seriesStatus(series, hovered, selected);
      var style = _Utils2.default.getStatusStyle(status, series.statusStyles);

      var data = series.data.map(function (d) {
        return {
          x: d.x,
          y: d.y,
          r: d.r,
          base: d.base
        };
      });

      return _react2.default.createElement(
        _reactMove.Animate,
        {
          'default': {
            data: data,
            visibility: 0
          },
          data: {
            data: data,
            visibility: visibility
          }
        },
        function (inter) {
          var seriesInteractionProps = interaction === 'series' ? {
            onClick: function onClick() {
              return _this2.selectSeries(series);
            },
            onMouseEnter: function onMouseEnter() {
              return _this2.hoverSeries(series);
            },
            onMouseMove: function onMouseMove() {
              return _this2.hoverSeries(series);
            },
            onMouseLeave: function onMouseLeave() {
              return _this2.hoverSeries(null);
            }
          } : {};
          return _react2.default.createElement(
            'g',
            null,
            inter.data.map(function (datum, i) {
              var status = _Utils2.default.datumStatus(series, datum, hovered, selected);
              var dataStyle = _Utils2.default.getStatusStyle(status, datum.statusStyles);

              var datumInteractionProps = interaction === 'element' ? {
                onClick: function onClick() {
                  return _this2.selectDatum(datum);
                },
                onMouseEnter: function onMouseEnter() {
                  return _this2.hoverDatum(datum);
                },
                onMouseMove: function onMouseMove() {
                  return _this2.hoverDatum(datum);
                },
                onMouseLeave: function onMouseLeave() {
                  return _this2.hoverDatum(null);
                }
              } : {};

              return _react2.default.createElement(_Circle2.default, _extends({
                key: i,
                x: inter.data[i].x,
                y: inter.data[i].y,
                r: inter.data[i].r,
                style: _extends({}, circleDefaultStyle, style, style.circle, dataStyle, dataStyle.circle),
                opacity: inter.visibility
              }, seriesInteractionProps, datumInteractionProps));
            }),
            ')}'
          );
        }
      );
    }
  }]);

  return Line;
}(_react.PureComponent);

exports.default = (0, _reactState.Connect)(function (state, props) {
  return {
    hovered: state.hovered,
    selected: state.selected,
    interaction: state.interaction
  };
}, {
  filter: function filter(oldState, newState, meta) {
    return meta.type !== 'cursor';
  }
})(Line);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL0J1YmJsZS5qcyJdLCJuYW1lcyI6WyJjaXJjbGVEZWZhdWx0U3R5bGUiLCJyIiwiTGluZSIsInNlbGVjdFNlcmllcyIsImJpbmQiLCJob3ZlclNlcmllcyIsInNlbGVjdERhdHVtIiwiaG92ZXJEYXR1bSIsInByb3BzIiwic2VyaWVzIiwidmlzaWJpbGl0eSIsInNlbGVjdGVkIiwiaG92ZXJlZCIsImludGVyYWN0aW9uIiwic3RhdHVzIiwic2VyaWVzU3RhdHVzIiwic3R5bGUiLCJnZXRTdGF0dXNTdHlsZSIsInN0YXR1c1N0eWxlcyIsImRhdGEiLCJtYXAiLCJ4IiwiZCIsInkiLCJiYXNlIiwic2VyaWVzSW50ZXJhY3Rpb25Qcm9wcyIsIm9uQ2xpY2siLCJvbk1vdXNlRW50ZXIiLCJvbk1vdXNlTW92ZSIsIm9uTW91c2VMZWF2ZSIsImludGVyIiwiZGF0dW0iLCJpIiwiZGF0dW1TdGF0dXMiLCJkYXRhU3R5bGUiLCJkYXR1bUludGVyYWN0aW9uUHJvcHMiLCJjaXJjbGUiLCJzdGF0ZSIsImZpbHRlciIsIm9sZFN0YXRlIiwibmV3U3RhdGUiLCJtZXRhIiwidHlwZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFBOzs7O0FBQ0E7O0FBQ0E7O0FBRUE7Ozs7QUFDQTs7QUFRQTs7Ozs7Ozs7Ozs7O0FBREE7OztBQUdBLElBQU1BLHFCQUFxQjtBQUN6QkMsS0FBRztBQURzQixDQUEzQjs7SUFJTUMsSTs7O0FBQ0osa0JBQWU7QUFBQTs7QUFBQTs7QUFFYixVQUFLQyxZQUFMLEdBQW9CLGlDQUFhQyxJQUFiLE9BQXBCO0FBQ0EsVUFBS0MsV0FBTCxHQUFtQixnQ0FBWUQsSUFBWixPQUFuQjtBQUNBLFVBQUtFLFdBQUwsR0FBbUIsZ0NBQVlGLElBQVosT0FBbkI7QUFDQSxVQUFLRyxVQUFMLEdBQWtCLCtCQUFXSCxJQUFYLE9BQWxCO0FBTGE7QUFNZDs7Ozs2QkFDUztBQUFBOztBQUFBLG1CQVFKLEtBQUtJLEtBUkQ7QUFB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LHlCQUNiLFVBQUNFLEtBQUQsRUFBUTdCLEtBQVIsRUFBa0I7QUFDaEIsU0FBTztBQUNMSSxhQUFTeUIsTUFBTXpCLE9BRFY7QUFFTEQsY0FBVTBCLE1BQU0xQixRQUZYO0FBR0xFLGlCQUFhd0IsTUFBTXhCO0FBSGQsR0FBUDtBQUtELENBUFksRUFRYjtBQUNFeUIsVUFBUSxnQkFBQ0MsUUFBRCxFQUFXQyxRQUFYLEVBQXFCQyxJQUFyQjtBQUFBLFdBQThCQSxLQUFLQyxJQUFMLEtBQWMsUUFBNUM7QUFBQTtBQURWLENBUmEsRUFXYnhDLElBWGEsQyIsImZpbGUiOiJCdWJibGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QsIHsgUHVyZUNvbXBvbmVudCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgQ29ubmVjdCB9IGZyb20gJ3JlYWN0LXN0YXRlJ1xuaW1wb3J0IHsgQW5pbWF0ZSB9IGZyb20gJ3JlYWN0LW1vdmUnXG5cbmltcG9ydCBVdGlscyBmcm9tICcuLi91dGlscy9VdGlscydcbmltcG9ydCB7XG4gIHNlbGVjdFNlcmllcyxcbiAgaG92ZXJTZXJpZXMsXG4gIHNlbGVjdERhdHVtLFxuICBob3ZlckRhdHVtLFxufSBmcm9tICcuLi91dGlscy9pbnRlcmFjdGlvbk1ldGhvZHMnXG5cbi8vXG5pbXBvcnQgQ2lyY2xlIGZyb20gJy4uL3ByaW1pdGl2ZXMvQ2lyY2xlJ1xuXG5jb25zdCBjaXJjbGVEZWZhdWx0U3R5bGUgPSB7XG4gIHI6IDIsXG59XG5cbmNsYXNzIExpbmUgZXh0ZW5kcyBQdXJlQ29tcG9uZW50IHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLnNlbGVjdFNlcmllcyA9IHNlbGVjdFNlcmllcy5iaW5kKHRoaXMpXG4gICAgdGhpcy5ob3ZlclNlcmllcyA9IGhvdmVyU2VyaWVzLmJpbmQodGhpcylcbiAgICB0aGlzLnNlbGVjdERhdHVtID0gc2VsZWN0RGF0dW0uYmluZCh0aGlzKVxuICAgIHRoaXMuaG92ZXJEYXR1bSA9IGhvdmVyRGF0dW0uYmluZCh0aGlzKVxuICB9XG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3Qge1xuICAgICAgc2VyaWVzLFxuICAgICAgdmlzaWJpbGl0eSxcbiAgICAgIC8vXG4gICAgICBzZWxlY3RlZCxcbiAgICAgIGhvdmVyZWQsXG4gICAgICBpbnRlcmFjdGlvbixcbiAgICB9ID0gdGhpcy5wcm9wc1xuXG4gICAgY29uc3Qgc3RhdHVzID0gVXRpbHMuc2VyaWVzU3RhdHVzKHNlcmllcywgaG92ZXJlZCwgc2VsZWN0ZWQpXG4gICAgY29uc3Qgc3R5bGUgPSBVdGlscy5nZXRTdGF0dXNTdHlsZShzdGF0dXMsIHNlcmllcy5zdGF0dXNTdHlsZXMpXG5cbiAgICBjb25zdCBkYXRhID0gc2VyaWVzLmRhdGEubWFwKGQgPT4gKHtcbiAgICAgIHg6IGQueCxcbiAgICAgIHk6IGQueSxcbiAgICAgIHI6IGQucixcbiAgICAgIGJhc2U6IGQuYmFzZSxcbiAgICB9KSlcblxuICAgIHJldHVybiAoXG4gICAgICA8QW5pbWF0ZVxuICAgICAgICBkZWZhdWx0PXt7XG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICB2aXNpYmlsaXR5OiAwLFxuICAgICAgICB9fVxuICAgICAgICBkYXRhPXt7XG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgICB2aXNpYmlsaXR5LFxuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICB7aW50ZXIgPT4ge1xuICAgICAgICAgIGNvbnN0IHNlcmllc0ludGVyYWN0aW9uUHJvcHMgPSBpbnRlcmFjdGlvbiA9PT0gJ3NlcmllcydcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICBvbkNsaWNrOiAoKSA9PiB0aGlzLnNlbGVjdFNlcmllcyhzZXJpZXMpLFxuICAgICAgICAgICAgICBvbk1vdXNlRW50ZXI6ICgpID0+IHRoaXMuaG92ZXJTZXJpZXMoc2VyaWVzKSxcbiAgICAgICAgICAgICAgb25Nb3VzZU1vdmU6ICgpID0+IHRoaXMuaG92ZXJTZXJpZXMoc2VyaWVzKSxcbiAgICAgICAgICAgICAgb25Nb3VzZUxlYXZlOiAoKSA9PiB0aGlzLmhvdmVyU2VyaWVzKG51bGwpLFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7fVxuICAgICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICA8Zz5cbiAgICAgICAgICAgICAge2ludGVyLmRhdGEubWFwKChkYXR1bSwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IFV0aWxzLmRhdHVtU3RhdHVzKFxuICAgICAgICAgICAgICAgICAgc2VyaWVzLFxuICAgICAgICAgICAgICAgICAgZGF0dW0sXG4gICAgICAgICAgICAgICAgICBob3ZlcmVkLFxuICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YVN0eWxlID0gVXRpbHMuZ2V0U3RhdHVzU3R5bGUoXG4gICAgICAgICAgICAgICAgICBzdGF0dXMsXG4gICAgICAgICAgICAgICAgICBkYXR1bS5zdGF0dXNTdHlsZXNcbiAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICBjb25zdCBkYXR1bUludGVyYWN0aW9uUHJvcHMgPSBpbnRlcmFjdGlvbiA9PT0gJ2VsZW1lbnQnXG4gICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgb25DbGljazogKCkgPT4gdGhpcy5zZWxlY3REYXR1bShkYXR1bSksXG4gICAgICAgICAgICAgICAgICAgIG9uTW91c2VFbnRlcjogKCkgPT4gdGhpcy5ob3ZlckRhdHVtKGRhdHVtKSxcbiAgICAgICAgICAgICAgICAgICAgb25Nb3VzZU1vdmU6ICgpID0+IHRoaXMuaG92ZXJEYXR1bShkYXR1bSksXG4gICAgICAgICAgICAgICAgICAgIG9uTW91c2VMZWF2ZTogKCkgPT4gdGhpcy5ob3ZlckRhdHVtKG51bGwpLFxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgOiB7fVxuXG4gICAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICAgIDxDaXJjbGVcbiAgICAgICAgICAgICAgICAgICAga2V5PXtpfVxuICAgICAgICAgICAgICAgICAgICB4PXtpbnRlci5kYXRhW2ldLnh9XG4gICAgICAgICAgICAgICAgICAgIHk9e2ludGVyLmRhdGFbaV0ueX1cbiAgICAgICAgICAgICAgICAgICAgcj17aW50ZXIuZGF0YVtpXS5yfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgIC4uLmNpcmNsZURlZmF1bHRTdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAuLi5zdHlsZS5jaXJjbGUsXG4gICAgICAgICAgICAgICAgICAgICAgLi4uZGF0YVN0eWxlLFxuICAgICAgICAgICAgICAgICAgICAgIC4uLmRhdGFTdHlsZS5jaXJjbGUsXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk9e2ludGVyLnZpc2liaWxpdHl9XG4gICAgICAgICAgICAgICAgICAgIHsuLi5zZXJpZXNJbnRlcmFjdGlvblByb3BzfVxuICAgICAgICAgICAgICAgICAgICB7Li4uZGF0dW1JbnRlcmFjdGlvblByb3BzfVxuICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgIH0pfSl9XG4gICAgICAgICAgICA8L2c+XG4gICAgICAgICAgKVxuICAgICAgICB9fVxuICAgICAgPC9BbmltYXRlPlxuICAgIClcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb25uZWN0KFxuICAoc3RhdGUsIHByb3BzKSA9PiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhvdmVyZWQ6IHN0YXRlLmhvdmVyZWQsXG4gICAgICBzZWxlY3RlZDogc3RhdGUuc2VsZWN0ZWQsXG4gICAgICBpbnRlcmFjdGlvbjogc3RhdGUuaW50ZXJhY3Rpb24sXG4gICAgfVxuICB9LFxuICB7XG4gICAgZmlsdGVyOiAob2xkU3RhdGUsIG5ld1N0YXRlLCBtZXRhKSA9PiBtZXRhLnR5cGUgIT09ICdjdXJzb3InLFxuICB9XG4pKExpbmUpXG4iXX0=