'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactState = require('react-state');

var _reactMove = require('react-move');

var _Selectors = require('../utils/Selectors');

var _Selectors2 = _interopRequireDefault(_Selectors);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }
//


var Cursor = function (_PureComponent) {
  _inherits(Cursor, _PureComponent);

  function Cursor() {
    _classCallCheck(this, Cursor);

    var _this = _possibleConstructorReturn(this, (Cursor.__proto__ || Object.getPrototypeOf(Cursor)).call(this));

    _this.onHover = _this.onHover.bind(_this);
    _this.onActivate = _this.onActivate.bind(_this);
    return _this;
  }

  _createClass(Cursor, [{
    key: 'render',
    value: function render() {
      var _this2 = this;

      var _props = this.props,
          primary = _props.primary,
          snap = _props.snap,
          stackData = _props.stackData,
          primaryAxis = _props.primaryAxis,
          secondaryAxis = _props.secondaryAxis,
          cursor = _props.cursor,
          _props$offset = _props.offset,
          left = _props$offset.left,
          top = _props$offset.top,
          gridX = _props.gridX,
          gridY = _props.gridY,
          children = _props.children;

      // Don't render until we have all dependencies

      if (!stackData || !cursor || !primaryAxis || !secondaryAxis) {
        return null;
      }

      var x = cursor.x;
      var y = cursor.y;
      var animated = false;

      var axis = primary ? primaryAxis : secondaryAxis;
      var siblingAxis = primary ? secondaryAxis : primaryAxis;
      var siblingRange = siblingAxis.scale.range();

      var invert = axis.scale.invert || function (d) {
        return d;
      };

      var x1 = void 0,
          x2 = void 0,
          y1 = void 0,
          y2 = void 0,
          label = void 0,
          alignPctX = void 0,
          alignPctY = void 0;

      if (primary && (axis.type === 'ordinal' || snap)) {
        animated = true;
        var closestDatum = { focus: {} };
        if (primaryAxis.vertical) {
          var smallestDistance = 10000000;
          stackData.forEach(function (series) {
            series.data.forEach(function (datum) {
              var distance = Math.abs(y - datum.focus.x);
              if (distance < smallestDistance) {
                smallestDistance = distance;
                closestDatum = datum;
              }
            });
          });
          y = closestDatum.focus.x;
          label = typeof closestDatum.primary !== 'undefined' ? axis.format(closestDatum.primary) : undefined;
        } else {
          var _smallestDistance = 10000000;
          stackData.forEach(function (series) {
            series.data.forEach(function (datum) {
              var distance = Math.abs(x - datum.focus.x);
              if (distance < _smallestDistance) {
                _smallestDistance = distance;
                closestDatum = datum;
              }
            });
          });
          x = closestDatum.focus.x;
          label = typeof closestDatum.primary !== 'undefined' ? axis.format(closestDatum.primary) : undefined;
        }
      }

      if (axis.vertical) {
        x1 = siblingRange[0];
        x2 = siblingRange[1];
        y1 = y - 1;
        y2 = y + 1;
        label = typeof label !== 'undefined' ? label : axis.format(invert(cursor.y));
        if (axis.position === 'left') {
          alignPctX = -100;
          alignPctY = -50;
        } else {
          alignPctX = 0;
          alignPctY = -50;
        }
      } else {
        x1 = x - 1;
        x2 = x + 1;
        y1 = siblingRange[0];
        y2 = siblingRange[1];
        label = typeof label !== 'undefined' ? label : axis.format(invert(cursor.x));
        if (axis.position === 'top') {
          alignPctX = -500;
          alignPctY = -100;
        } else {
          alignPctX = -50;
          alignPctY = 0;
        }
      }

      var xStart = Math.min(x1, x2);
      var yStart = Math.min(y1, y2);
      var xEnd = Math.max(x1, x2);
      var yEnd = Math.max(y1, y2);

      var height = Math.max(yEnd - yStart, 0);
      var width = Math.max(xEnd - xStart, 0);

      return _react2.default.createElement(
        _reactMove.Animate,
        {
          data: {
            xStart: xStart,
            yStart: yStart,
            width: width,
            height: height,
            x1: x1,
            y1: y1,
            visibility: cursor.active ? 1 : 0
          },
          duration: 400
        },
        function (inter) {
          return _react2.default.createElement(
            'div',
            {
              className: 'Cursor',
              onMouseLeave: function onMouseLeave(e) {
                return _this2.onHover(null, e);
              },
              style: {
                pointerEvents: 'none',
                position: 'absolute',
                left: left + gridX + 'px',
                top: top + gridY + 'px',
                opacity: inter.visibility
              }
            },
            JSON.stringify(cursor, null, 2),
            _react2.default.createElement('div', {
              style: {
                position: 'absolute',
                transform: 'translate3d(' + (animated ? inter.xStart : xStart) + 'px, ' + (animated ? inter.yStart : yStart) + 'px, 0px)',
                width: (animated ? inter.width : width) + 'px',
                height: (animated ? inter.height : height) + 'px',
                background: 'rgba(0,0,0,.3)',
                WebkitBackfaceVisibility: 'hidden'
              }
            }),
            _react2.default.createElement(
              'div',
              {
                style: {
                  position: 'absolute',
                  transform: 'translate3d(' + (animated ? inter.x1 : x1) + 'px, ' + (animated ? inter.y1 : y1) + 'px, 0px)'
                }
              },
              _react2.default.createElement(
                'div',
                {
                  style: {
                    padding: '5px',
                    fontSize: '10px',
                    background: 'rgba(0,0,0,.6)',
                    color: 'white',
                    borderRadius: '3px',
                    position: 'relative',
                    transform: 'translate3d(' + alignPctX + '%, ' + alignPctY + '%, 0px)',
                    whiteSpace: !axis.vertical && 'nowrap'
                  }
                },
                children({
                  label: label
                })
              )
            )
          );
        }
      );
    }
  }, {
    key: 'onHover',
    value: function onHover(hovered, e) {
      return this.props.dispatch(function (state) {
        return _extends({}, state, {
          hovered: hovered
        });
      }, {
        type: 'hovered'
      });
    }
  }, {
    key: 'onActivate',
    value: function onActivate(newActive, e) {
      var _props2 = this.props,
          active = _props2.active,
          dispatch = _props2.dispatch;

      if (active === newActive) {
        return dispatch(function (state) {
          return _extends({}, state, {
            active: null
          });
        }, {
          type: 'active'
        });
      }
      dispatch(function (state) {
        return _extends({}, state, {
          active: newActive
        });
      }, {
        type: 'active'
      });
    }
  }]);

  return Cursor;
}(_react.PureComponent);

Cursor.defaultProps = {
  children: function children(_ref) {
    var label = _ref.label;
    return _react2.default.createElement(
      'span',
      null,
      label
    );
  }
};
exports.default = (0, _reactState.Connect)(function () {
  var selectors = {
    primaryAxis: _Selectors2.default.primaryAxis(),
    secondaryAxis: _Selectors2.default.secondaryAxis(),
    offset: _Selectors2.default.offset(),
    gridX: _Selectors2.default.gridX(),
    gridY: _Selectors2.default.gridY()
  };
  return function (state) {
    return {
      stackData: state.stackData,
      primaryAxis: selectors.primaryAxis(state),
      secondaryAxis: selectors.secondaryAxis(state),
      cursor: state.cursor,
      offset: selectors.offset(state),
      gridX: selectors.gridX(state),
      gridY: selectors.gridY(state)
    };
  };
}, {
  statics: {
    isHTML: true
  }
})(Cursor);

/* <g

  >

  <Rectangle
    x1={labelX1}
    x2={labelX2}
    y1={labelY1}
    y2={labelY2}
  />
  <Text
    x={x1}
    y={y1}
    fontSize={fontSize}
    textAnchor={axis.position === 'left' ? 'end' : axis.position === 'right' ? 'start' : 'middle'}
    dominantBaseline={axis.position === 'top' ? 'alphabetic' : axis.position === 'bottom' ? 'hanging' : 'central'}
  >
    {label}
  </Text>
</g> */
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21wb25lbnRzL0N1cnNvci5qcyJdLCJuYW1lcyI6WyJDdXJzb3IiLCJvbkhvdmVyIiwiYmluZCIsIm9uQWN0aXZhdGUiLCJwcm9wcyIsInByaW1hcnkiLCJzbmFwIiwic3RhY2tEYXRhIiwicHJpbWFyeUF4aXMiLCJzZWNvbmRhcnlBeGlzIiwiY3Vyc29yIiwib2Zmc2V0IiwibGVmdCIsInRvcCIsImdyaWRYIiwiZ3JpZFkiLCJjaGlsZHJlbiIsIngiLCJ5IiwiYW5pbWF0ZWQiLCJheGlzIiwic2libGluZ0F4aXMiLCJzaWJsaW5nUmFuZ2UiLCJzY2FsZSIsInJhbmdlIiwiaW52ZXJ0IiwiZCIsIngxIiwieDIiLCJ5MSIsInkyIiwibGFiZWwiLCJhbGlnblBjdFgiLCJhbGlnblBjdFkiLCJ0eXBlIiwiY2xvc2VzdERhdHVtIiwiZm9jdXMiLCJ2ZXJ0aWNhbCIsInNtYWxsZXN0RGlzdGFuY2UiLCJmb3JFYWNoIiwic2VyaWVzIiwiZGF0YSIsImRpc3RhbmNlIiwiTWF0aCIsImFicyIsImRhdHVtIiwiZm9ybWF0IiwidW5kZWZpbmVkIiwicG9zaXRpb24iLCJ4U3RhcnQiLCJtaW4iLCJ5U3RhcnQiLCJ4RW5kIiwibWF4IiwieUVuZCIsImhlaWdodCIsIndpZHRoIiwidmlzaWJpbGl0eSIsImFjdGl2ZSIsImUiLCJwb2ludGVyRXZlbnRzIiwib3BhY2l0eSIsImludGVyIiwiSlNPTiIsInN0cmluZ2lmeSIsInRyYW5zZm9ybSIsImJhY2tncm91bmQiLCJXZWJraXRCYWNrZmFjZVZpc2liaWxpdHkiLCJwYWRkaW5nIiwiZm9udFNpemUiLCJjb2xvciIsImJvcmRlclJhZGl1cyIsIndoaXRlU3BhY2UiLCJob3ZlcmVkIiwiZGlzcGF0Y2giLCJzdGF0ZSIsIm5ld0FjdGl2ZSIsImRlZmF1bHRQcm9wcyIsInNlbGVjdG9ycyIsInN0YXRpY3MiLCJpc0hUTUwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTs7OztBQUNBOztBQUNBOztBQUVBOzs7Ozs7Ozs7OztBQURBOzs7SUFHTUEsTTs7O0FBT0osb0JBQWU7QUFBQTs7QUFBQTs7QUFFYixVQUFLQyxPQUFMLEdBQWUsTUFBS0EsT0FBTCxDQUFhQyxJQUFiLE9BQWY7QUFDQSxVQUFLQyxVQUFMLEdBQWtCLE1BQUtBLFVBQUwsQ0FBZ0JELElBQWhCLE9BQWxCO0FBSGE7QUFJZDs7Ozs2QkFDUztBQUFBOztBQUFBLG1CQWFKLEtBQUtFLEtBYkQ7QUFBQSxVQUVOQyxPQUZNLFVBRU5BLE9BRk07QUFBQSxVQUdOQyxJQUhNLFVBR05BLElBSE07QUFBQSxVQUtOQyxTQUxNLFVBS05BLFNBTE07QUFBQSxVQU1OQyxXQU5NLFVBTU5BLFdBTk07QUFBQSxVQU9OQyxhQVBNLFVBT05BLGFBUE07QUFBQSxVQVFOQyxNQVJNLFVBUU5BLE1BUk07QUFBQSxpQ0FTTkMsTUFUTTtBQUFBLFVBU0lDLElBVEosaUJBU0lBLElBVEo7QUFBQSxVQVNVQyxHQVRWLGlCQVNVQSxHQVRWO0FBQUEsVUFVTkMsS0FWTSxVQVVOQSxLQVZNO0FBQUEsVUFXTkMsS0FYTSxVQVdOQSxLQVhNO0FBQUEsVUFZTkMsUUFaTSxVQVlOQSxRQVpNOztBQWVSOztBQUNBLFVBQUksQ0FBQ1QsU0FBRCxJQUFjLENBQUNHLE1BQWYsSUFBeUIsQ0FBQ0YsV0FBMUIsSUFBeUMsQ0FBQ0MsYUFBOUMsRUFBNkQ7QUFDM0QsZUFBTyxJQUFQO0FBQ0Q7O0FBRUQsVUFBSVEsSUFBSVAsT0FBT08sQ0FBZjtBQUNBLFVBQUlDLElBQUlSLE9BQU9RLENBQWY7QUFDQSxVQUFJQyxXQUFXLEtBQWY7O0FBRUEsVUFBTUMsT0FBT2YsVUFBVUcsV0FBVixHQUF3QkMsYUFBckM7QUFDQSxVQUFNWSxjQUFjaEIsVUFBVUksYUFBVixHQUEwQkQsV0FBOUM7QUFDQSxVQUFNYyxlQUFlRCxZQUFZRSxLQUFaLENBQWtCQyxLQUFsQixFQUFyQjs7QUFFQSxVQUFNQyxTQUFTTCxLQUFLRyxLQUFMLENBQVdFLE1BQVgsSUFBc0I7QUFBQSxlQUFLQyxDQUFMO0FBQUEsT0FBckM7O0FBRUEsVUFBSUMsV0FBSjtBQUFBLFVBQVFDLFdBQVI7QUFBQSxVQUFZQyxXQUFaO0FBQUEsVUFBZ0JDLFdBQWhCO0FBQUEsVUFBb0JDLGNBQXBCO0FBQUEsVUFBMkJDLGtCQUEzQjtBQUFBLFVBQXNDQyxrQkFBdEM7O0FBRUEsVUFBSTVCLFlBQVllLEtBQUtjLElBQUwsS0FBYyxTQUFkLElBQTJCNUIsSUFBdkMsQ0FBSixFQUFrRDtBQUNoRGEsbUJBQVcsSUFBWDtBQUNBLFlBQUlnQixlQUFlLEVBQUVDLE9BQU8sRUFBVCxFQUFuQjtBQUNBLFlBQUk1QixZQUFZNkIsUUFBaEIsRUFBMEI7QUFDeEIsY0FBSUMsbUJBQW1CLFFBQXZCO0FBQ0EvQixvQkFBVWdDLE9BQVYsQ0FBa0Isa0JBQVU7QUFDMUJDLG1CQUFPQyxJQUFQLENBQVlGLE9BQVosQ0FBb0IsaUJBQVM7QUFDM0Isa0JBQU1HLFdBQVdDLEtBQUtDLEdBQUwsQ0FBUzFCLElBQUkyQixNQUFNVCxLQUFOLENBQVluQixDQUF6QixDQUFqQjtBQUNBLGtCQUFJeUIsV0FBV0osZ0JBQWYsRUFBaUM7QUFDL0JBLG1DQUFtQkksUUFBbkI7QUFDQVAsK0JBQWVVLEtBQWY7QUFDRDtBQUNGLGFBTkQ7QUFPRCxXQVJEO0FBU0EzQixjQUFJaUIsYUFBYUMsS0FBYixDQUFtQm5CLENBQXZCO0FBQ0FjLGtCQUNFLE9BQU9JLGFBQWE5QixPQUFwQixLQUFnQyxXQUFoQyxHQUNJZSxLQUFLMEIsTUFBTCxDQUFZWCxhQUFhOUIsT0FBekIsQ0FESixHQUVJMEMsU0FITjtBQUlELFNBaEJELE1BZ0JPO0FBQ0wsY0FBSVQsb0JBQW1CLFFBQXZCO0FBQ0EvQixvQkFBVWdDLE9BQVYsQ0FBa0Isa0JBQVU7QUFDMUJDLG1CQUFPQyxJQUFQLENBQVlGLE9BQVosQ0FBb0IsaUJBQVM7QUFDM0Isa0JBQU1HLFdBQVdDLEtBQUtDLEdBQUwsQ0FBUzNCLElBQUk0QixNQUFNVCxLQUFOLENBQVluQixDQUF6QixDQUFqQjtBQUNBLGtCQUFJeUIsV0FBV0osaUJBQWYsRUFBaUM7QUFDL0JBLG9DQUFtQkksUUFBbkI7QUFDQVAsK0JBQWVVLEtBQWY7QUFDRDtBQUNGLGFBTkQ7QUFPRCxXQVJEO0FBU0E1QixjQUFJa0IsYUFBYUMsS0FBYixDQUFtQm5CLENBQXZCO0FBQ0FjLGtCQUNFLE9BQU9JLGFBQWE5QixPQUFwQixLQUFnQyxXQUFoQyxHQUNJZSxLQUFLMEIsTUFBTCxDQUFZWCxhQUFhOUIsT0FBekIsQ0FESixHQUVJMEMsU0FITjtBQUlEO0FBQ0Y7O0FBRUQsVUFBSTNCLEtBQUtpQixRQUFULEVBQW1CO0FBQ2pCVixhQUFLTCxhQUFhLENBQWIsQ0FBTDtBQUNBTSxhQUFLTixhQUFhLENBQWIsQ0FBTDtBQUNBTyxhQUFLWCxJQUFJLENBQVQ7QUFDQVksYUFBS1osSUFBSSxDQUFUO0FBQ0FhLGdCQUNFLE9BQU9BLEtBQVAsS0FBaUIsV0FBakIsR0FBK0JBLEtBQS9CLEdBQXVDWCxLQUFLMEIsTUFBTCxDQUFZckIsT0FBT2YsT0FBT1EsQ0FBZCxDQUFaLENBRHpDO0FBRUEsWUFBSUUsS0FBSzRCLFFBQUwsS0FBa0IsTUFBdEIsRUFBOEI7QUFDNUJoQixzQkFBWSxDQUFDLEdBQWI7QUFDQUMsc0JBQVksQ0FBQyxFQUFiO0FBQ0QsU0FIRCxNQUdPO0FBQ0xELHNCQUFZLENBQVo7QUFDQUMsc0JBQVksQ0FBQyxFQUFiO0FBQ0Q7QUFDRixPQWRELE1BY087QUFDTE4sYUFBS1YsSUFBSSxDQUFUO0FBQ0FXLGFBQUtYLElBQUksQ0FBVDtBQUNBWSxhQUFLUCxhQUFhLENBQWIsQ0FBTDtBQUNBUSxhQUFLUixhQUFhLENBQWIsQ0FBTDtBQUNBUyxnQkFDRSxPQUFPQSxLQUFQLEtBQWlCLFdBQWpCLEdBQStCQSxLQUEvQixHQUF1Q1gsS0FBSzBCLE1BQUwsQ0FBWXJCLE9BQU9mLE9BQU9PLENBQWQsQ0FBWixDQUR6QztBQUVBLFlBQUlHLEtBQUs0QixRQUFMLEtBQWtCLEtBQXRCLEVBQTZCO0FBQzNCaEIsc0JBQVksQ0FBQyxHQUFiO0FBQ0FDLHNCQUFZLENBQUMsR0FBYjtBQUNELFNBSEQsTUFHTztBQUNMRCxzQkFBWSxDQUFDLEVBQWI7QUFDQUMsc0JBQVksQ0FBWjtBQUNEO0FBQ0Y7O0FBRUQsVUFBTWdCLFNBQVNOLEtBQUtPLEdBQUwsQ0FBU3ZCLEVBQVQsRUFBYUMsRUFBYixDQUFmO0FBQ0EsVUFBTXVCLFNBQVNSLEtBQUtPLEdBQUwsQ0FBU3JCLEVBQVQsRUFBYUMsRUFBYixDQUFmO0FBQ0EsVUFBTXNCLE9BQU9ULEtBQUtVLEdBQUwsQ0FBUzFCLEVBQVQsRUFBYUMsRUFBYixDQUFiO0FBQ0EsVUFBTTBCLE9BQU9YLEtBQUtVLEdBQUwsQ0FBU3hCLEVBQVQsRUFBYUMsRUFBYixDQUFiOztBQUVBLFVBQU15QixTQUFTWixLQUFLVSxHQUFMLENBQVNDLE9BQU9ILE1BQWhCLEVBQXdCLENBQXhCLENBQWY7QUFDQSxVQUFNSyxRQUFRYixLQUFLVSxHQUFMLENBQVNELE9BQU9ILE1BQWhCLEVBQXdCLENBQXhCLENBQWQ7O0FBRUEsYUFDRTtBQUFBO0FBQUE7QUFDRSxnQkFBTTtBQUNKQSwwQkFESTtBQUVKRSwwQkFGSTtBQUdKSyx3QkFISTtBQUlKRCwwQkFKSTtBQUtKNUIsa0JBTEk7QUFNSkUsa0JBTkk7QUFPSjRCLHdCQUFZL0MsT0FBT2dELE1BQVAsR0FBZ0IsQ0FBaEIsR0FBb0I7QUFQNUIsV0FEUjtBQVVFLG9CQUFVO0FBVlo7QUFZRztBQUFBLGlCQUNFO0FBQUE7QUFBQTtBQUNDLHlCQUFVLFFBRFg7QUFFQyw0QkFBYztBQUFBLHVCQUFLLE9BQUt6RCxPQUFMLENBQWEsSUFBYixFQUFtQjBELENBQW5CLENBQUw7QUFBQSxlQUZmO0FBR0MscUJBQU87QUFDTEMsK0JBQWUsTUFEVjtBQUVMWiwwQkFBVSxVQUZMO0FBR0xwQyxzQkFBU0EsT0FBT0UsS0FBaEIsT0FISztBQUlMRCxxQkFBUUEsTUFBTUUsS0FBZCxPQUpLO0FBS0w4Qyx5QkFBU0MsTUFBTUw7QUFMVjtBQUhSO0FBV0VNLGlCQUFLQyxTQUFMLENBQWV0RCxNQUFmLEVBQXVCLElBQXZCLEVBQTZCLENBQTdCLENBWEY7QUFZQztBQUNFLHFCQUFPO0FBQ0xzQywwQkFBVSxVQURMO0FBRUxpQiw2Q0FBMEI5QyxXQUN0QjJDLE1BQU1iLE1BRGdCLEdBRXRCQSxNQUZKLGNBRWlCOUIsV0FBVzJDLE1BQU1YLE1BQWpCLEdBQTBCQSxNQUYzQyxjQUZLO0FBS0xLLHdCQUFVckMsV0FBVzJDLE1BQU1OLEtBQWpCLEdBQXlCQSxLQUFuQyxRQUxLO0FBTUxELHlCQUFXcEMsV0FBVzJDLE1BQU1QLE1BQWpCLEdBQTBCQSxNQUFyQyxRQU5LO0FBT0xXLDRCQUFZLGdCQVBQO0FBUUxDLDBDQUEwQjtBQVJyQjtBQURULGNBWkQ7QUF3QkM7QUFBQTtBQUFBO0FBQ0UsdUJBQU87QUFDTG5CLDRCQUFVLFVBREw7QUFFTGlCLCtDQUEwQjlDLFdBQ3RCMkMsTUFBTW5DLEVBRGdCLEdBRXRCQSxFQUZKLGNBRWFSLFdBQVcyQyxNQUFNakMsRUFBakIsR0FBc0JBLEVBRm5DO0FBRks7QUFEVDtBQVFFO0FBQUE7QUFBQTtBQUNFLHlCQUFPO0FBQ0x1Qyw2QkFBUyxLQURKO0FBRUxDLDhCQUFVLE1BRkw7QUFHTEgsZ0NBQVksZ0JBSFA7QUFJTEksMkJBQU8sT0FKRjtBQUtMQyxrQ0FBYyxLQUxUO0FBTUx2Qiw4QkFBVSxVQU5MO0FBT0xpQixnREFBMEJqQyxTQUExQixXQUF5Q0MsU0FBekMsWUFQSztBQVFMdUMsZ0NBQVksQ0FBQ3BELEtBQUtpQixRQUFOLElBQWtCO0FBUnpCO0FBRFQ7QUFZR3JCLHlCQUFTO0FBQ1JlO0FBRFEsaUJBQVQ7QUFaSDtBQVJGO0FBeEJELFdBREY7QUFBQTtBQVpILE9BREY7QUFrRUQ7Ozs0QkFDUTBDLE8sRUFBU2QsQyxFQUFHO0FBQ25CLGFBQU8sS0FBS3ZELEtBQUwsQ0FBV3NFLFFBQVgsQ0FDTDtBQUFBLDRCQUNLQyxLQURMO0FBRUVGO0FBRkY7QUFBQSxPQURLLEVBS0w7QUFDRXZDLGNBQU07QUFEUixPQUxLLENBQVA7QUFTRDs7OytCQUNXMEMsUyxFQUFXakIsQyxFQUFHO0FBQUEsb0JBQ0ssS0FBS3ZELEtBRFY7QUFBQSxVQUNoQnNELE1BRGdCLFdBQ2hCQSxNQURnQjtBQUFBLFVBQ1JnQixRQURRLFdBQ1JBLFFBRFE7O0FBRXhCLFVBQUloQixXQUFXa0IsU0FBZixFQUEwQjtBQUN4QixlQUFPRixTQUNMO0FBQUEsOEJBQ0tDLEtBREw7QUFFRWpCLG9CQUFRO0FBRlY7QUFBQSxTQURLLEVBS0w7QUFDRXhCLGdCQUFNO0FBRFIsU0FMSyxDQUFQO0FBU0Q7QUFDRHdDLGVBQ0U7QUFBQSw0QkFDS0MsS0FETDtBQUVFakIsa0JBQVFrQjtBQUZWO0FBQUEsT0FERixFQUtFO0FBQ0UxQyxjQUFNO0FBRFIsT0FMRjtBQVNEOzs7Ozs7QUE1TkdsQyxNLENBQ0c2RSxZLEdBQWU7QUFDcEI3RCxZQUFVO0FBQUEsUUFBR2UsS0FBSCxRQUFHQSxLQUFIO0FBQUEsV0FDUDtBQUFBO0FBQUE7QUFDRUE7QUFERixLQURPO0FBQUE7QUFEVSxDO2tCQThOVCx5QkFDYixZQUFNO0FBQ0osTUFBTStDLFlBQVk7QUFDaEJ0RSxpQkFBYSxvQkFBVUEsV0FBVixFQURHO0FBRWhCQyxtQkFBZSxvQkFBVUEsYUFBVixFQUZDO0FBR2hCRSxZQUFRLG9CQUFVQSxNQUFWLEVBSFE7QUFJaEJHLFdBQU8sb0JBQVVBLEtBQVYsRUFKUztBQUtoQkMsV0FBTyxvQkFBVUEsS0FBVjtBQUxTLEdBQWxCO0FBT0EsU0FBTztBQUFBLFdBQVU7QUFDZlIsaUJBQVdvRSxNQUFNcEUsU0FERjtBQUVmQyxtQkFBYXNFLFVBQVV0RSxXQUFWLENBQXNCbUUsS0FBdEIsQ0FGRTtBQUdmbEUscUJBQWVxRSxVQUFVckUsYUFBVixDQUF3QmtFLEtBQXhCLENBSEE7QUFJZmpFLGNBQVFpRSxNQUFNakUsTUFKQztBQUtmQyxjQUFRbUUsVUFBVW5FLE1BQVYsQ0FBaUJnRSxLQUFqQixDQUxPO0FBTWY3RCxhQUFPZ0UsVUFBVWhFLEtBQVYsQ0FBZ0I2RCxLQUFoQixDQU5RO0FBT2Y1RCxhQUFPK0QsVUFBVS9ELEtBQVYsQ0FBZ0I0RCxLQUFoQjtBQVBRLEtBQVY7QUFBQSxHQUFQO0FBU0QsQ0FsQlksRUFtQmI7QUFDRUksV0FBUztBQUNQQyxZQUFRO0FBREQ7QUFEWCxDQW5CYSxFQXdCYmhGLE1BeEJhLEM7O0FBMEJmIiwiZmlsZSI6IkN1cnNvci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBQdXJlQ29tcG9uZW50IH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBDb25uZWN0IH0gZnJvbSAncmVhY3Qtc3RhdGUnXG5pbXBvcnQgeyBBbmltYXRlIH0gZnJvbSAncmVhY3QtbW92ZSdcbi8vXG5pbXBvcnQgU2VsZWN0b3JzIGZyb20gJy4uL3V0aWxzL1NlbGVjdG9ycydcblxuY2xhc3MgQ3Vyc29yIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBkZWZhdWx0UHJvcHMgPSB7XG4gICAgY2hpbGRyZW46ICh7IGxhYmVsIH0pID0+XG4gICAgICAoPHNwYW4+XG4gICAgICAgIHtsYWJlbH1cbiAgICAgIDwvc3Bhbj4pLFxuICB9XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpXG4gICAgdGhpcy5vbkhvdmVyID0gdGhpcy5vbkhvdmVyLmJpbmQodGhpcylcbiAgICB0aGlzLm9uQWN0aXZhdGUgPSB0aGlzLm9uQWN0aXZhdGUuYmluZCh0aGlzKVxuICB9XG4gIHJlbmRlciAoKSB7XG4gICAgY29uc3Qge1xuICAgICAgcHJpbWFyeSxcbiAgICAgIHNuYXAsXG4gICAgICAvL1xuICAgICAgc3RhY2tEYXRhLFxuICAgICAgcHJpbWFyeUF4aXMsXG4gICAgICBzZWNvbmRhcnlBeGlzLFxuICAgICAgY3Vyc29yLFxuICAgICAgb2Zmc2V0OiB7IGxlZnQsIHRvcCB9LFxuICAgICAgZ3JpZFgsXG4gICAgICBncmlkWSxcbiAgICAgIGNoaWxkcmVuLFxuICAgIH0gPSB0aGlzLnByb3BzXG5cbiAgICAvLyBEb24ndCByZW5kZXIgdW50aWwgd2UgaGF2ZSBhbGwgZGVwZW5kZW5jaWVzXG4gICAgaWYgKCFzdGFja0RhdGEgfHwgIWN1cnNvciB8fCAhcHJpbWFyeUF4aXMgfHwgIXNlY29uZGFyeUF4aXMpIHtcbiAgICAgIHJldHVybiBudWxsXG4gICAgfVxuXG4gICAgbGV0IHggPSBjdXJzb3IueFxuICAgIGxldCB5ID0gY3Vyc29yLnlcbiAgICBsZXQgYW5pbWF0ZWQgPSBmYWxzZVxuXG4gICAgY29uc3QgYXhpcyA9IHByaW1hcnkgPyBwcmltYXJ5QXhpcyA6IHNlY29uZGFyeUF4aXNcbiAgICBjb25zdCBzaWJsaW5nQXhpcyA9IHByaW1hcnkgPyBzZWNvbmRhcnlBeGlzIDogcHJpbWFyeUF4aXNcbiAgICBjb25zdCBzaWJsaW5nUmFuZ2UgPSBzaWJsaW5nQXhpcy5zY2FsZS5yYW5nZSgpXG5cbiAgICBjb25zdCBpbnZlcnQgPSBheGlzLnNjYWxlLmludmVydCB8fCAoZCA9PiBkKVxuXG4gICAgbGV0IHgxLCB4MiwgeTEsIHkyLCBsYWJlbCwgYWxpZ25QY3RYLCBhbGlnblBjdFlcblxuICAgIGlmIChwcmltYXJ5ICYmIChheGlzLnR5cGUgPT09ICdvcmRpbmFsJyB8fCBzbmFwKSkge1xuICAgICAgYW5pbWF0ZWQgPSB0cnVlXG4gICAgICBsZXQgY2xvc2VzdERhdHVtID0geyBmb2N1czoge30gfVxuICAgICAgaWYgKHByaW1hcnlBeGlzLnZlcnRpY2FsKSB7XG4gICAgICAgIGxldCBzbWFsbGVzdERpc3RhbmNlID0gMTAwMDAwMDBcbiAgICAgICAgc3RhY2tEYXRhLmZvckVhY2goc2VyaWVzID0+IHtcbiAgICAgICAgICBzZXJpZXMuZGF0YS5mb3JFYWNoKGRhdHVtID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnMoeSAtIGRhdHVtLmZvY3VzLngpXG4gICAgICAgICAgICBpZiAoZGlzdGFuY2UgPCBzbWFsbGVzdERpc3RhbmNlKSB7XG4gICAgICAgICAgICAgIHNtYWxsZXN0RGlzdGFuY2UgPSBkaXN0YW5jZVxuICAgICAgICAgICAgICBjbG9zZXN0RGF0dW0gPSBkYXR1bVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgICAgIHkgPSBjbG9zZXN0RGF0dW0uZm9jdXMueFxuICAgICAgICBsYWJlbCA9XG4gICAgICAgICAgdHlwZW9mIGNsb3Nlc3REYXR1bS5wcmltYXJ5ICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgPyBheGlzLmZvcm1hdChjbG9zZXN0RGF0dW0ucHJpbWFyeSlcbiAgICAgICAgICAgIDogdW5kZWZpbmVkXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgc21hbGxlc3REaXN0YW5jZSA9IDEwMDAwMDAwXG4gICAgICAgIHN0YWNrRGF0YS5mb3JFYWNoKHNlcmllcyA9PiB7XG4gICAgICAgICAgc2VyaWVzLmRhdGEuZm9yRWFjaChkYXR1bSA9PiB7XG4gICAgICAgICAgICBjb25zdCBkaXN0YW5jZSA9IE1hdGguYWJzKHggLSBkYXR1bS5mb2N1cy54KVxuICAgICAgICAgICAgaWYgKGRpc3RhbmNlIDwgc21hbGxlc3REaXN0YW5jZSkge1xuICAgICAgICAgICAgICBzbWFsbGVzdERpc3RhbmNlID0gZGlzdGFuY2VcbiAgICAgICAgICAgICAgY2xvc2VzdERhdHVtID0gZGF0dW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9KVxuICAgICAgICB4ID0gY2xvc2VzdERhdHVtLmZvY3VzLnhcbiAgICAgICAgbGFiZWwgPVxuICAgICAgICAgIHR5cGVvZiBjbG9zZXN0RGF0dW0ucHJpbWFyeSAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gYXhpcy5mb3JtYXQoY2xvc2VzdERhdHVtLnByaW1hcnkpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZFxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChheGlzLnZlcnRpY2FsKSB7XG4gICAgICB4MSA9IHNpYmxpbmdSYW5nZVswXVxuICAgICAgeDIgPSBzaWJsaW5nUmFuZ2VbMV1cbiAgICAgIHkxID0geSAtIDFcbiAgICAgIHkyID0geSArIDFcbiAgICAgIGxhYmVsID1cbiAgICAgICAgdHlwZW9mIGxhYmVsICE9PSAndW5kZWZpbmVkJyA/IGxhYmVsIDogYXhpcy5mb3JtYXQoaW52ZXJ0KGN1cnNvci55KSlcbiAgICAgIGlmIChheGlzLnBvc2l0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgYWxpZ25QY3RYID0gLTEwMFxuICAgICAgICBhbGlnblBjdFkgPSAtNTBcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsaWduUGN0WCA9IDBcbiAgICAgICAgYWxpZ25QY3RZID0gLTUwXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHgxID0geCAtIDFcbiAgICAgIHgyID0geCArIDFcbiAgICAgIHkxID0gc2libGluZ1JhbmdlWzBdXG4gICAgICB5MiA9IHNpYmxpbmdSYW5nZVsxXVxuICAgICAgbGFiZWwgPVxuICAgICAgICB0eXBlb2YgbGFiZWwgIT09ICd1bmRlZmluZWQnID8gbGFiZWwgOiBheGlzLmZvcm1hdChpbnZlcnQoY3Vyc29yLngpKVxuICAgICAgaWYgKGF4aXMucG9zaXRpb24gPT09ICd0b3AnKSB7XG4gICAgICAgIGFsaWduUGN0WCA9IC01MDBcbiAgICAgICAgYWxpZ25QY3RZID0gLTEwMFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxpZ25QY3RYID0gLTUwXG4gICAgICAgIGFsaWduUGN0WSA9IDBcbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zdCB4U3RhcnQgPSBNYXRoLm1pbih4MSwgeDIpXG4gICAgY29uc3QgeVN0YXJ0ID0gTWF0aC5taW4oeTEsIHkyKVxuICAgIGNvbnN0IHhFbmQgPSBNYXRoLm1heCh4MSwgeDIpXG4gICAgY29uc3QgeUVuZCA9IE1hdGgubWF4KHkxLCB5MilcblxuICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWF4KHlFbmQgLSB5U3RhcnQsIDApXG4gICAgY29uc3Qgd2lkdGggPSBNYXRoLm1heCh4RW5kIC0geFN0YXJ0LCAwKVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxBbmltYXRlXG4gICAgICAgIGRhdGE9e3tcbiAgICAgICAgICB4U3RhcnQsXG4gICAgICAgICAgeVN0YXJ0LFxuICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICB4MSxcbiAgICAgICAgICB5MSxcbiAgICAgICAgICB2aXNpYmlsaXR5OiBjdXJzb3IuYWN0aXZlID8gMSA6IDAsXG4gICAgICAgIH19XG4gICAgICAgIGR1cmF0aW9uPXs0MDB9XG4gICAgICA+XG4gICAgICAgIHtpbnRlciA9PlxuICAgICAgICAgICg8ZGl2XG4gICAgICAgICAgICBjbGFzc05hbWU9J0N1cnNvcidcbiAgICAgICAgICAgIG9uTW91c2VMZWF2ZT17ZSA9PiB0aGlzLm9uSG92ZXIobnVsbCwgZSl9XG4gICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnbm9uZScsXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICBsZWZ0OiBgJHtsZWZ0ICsgZ3JpZFh9cHhgLFxuICAgICAgICAgICAgICB0b3A6IGAke3RvcCArIGdyaWRZfXB4YCxcbiAgICAgICAgICAgICAgb3BhY2l0eTogaW50ZXIudmlzaWJpbGl0eSxcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAge0pTT04uc3RyaW5naWZ5KGN1cnNvciwgbnVsbCwgMil9XG4gICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBgdHJhbnNsYXRlM2QoJHthbmltYXRlZFxuICAgICAgICAgICAgICAgICAgPyBpbnRlci54U3RhcnRcbiAgICAgICAgICAgICAgICAgIDogeFN0YXJ0fXB4LCAke2FuaW1hdGVkID8gaW50ZXIueVN0YXJ0IDogeVN0YXJ0fXB4LCAwcHgpYCxcbiAgICAgICAgICAgICAgICB3aWR0aDogYCR7YW5pbWF0ZWQgPyBpbnRlci53aWR0aCA6IHdpZHRofXB4YCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGAke2FuaW1hdGVkID8gaW50ZXIuaGVpZ2h0IDogaGVpZ2h0fXB4YCxcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLDAsMCwuMyknLFxuICAgICAgICAgICAgICAgIFdlYmtpdEJhY2tmYWNlVmlzaWJpbGl0eTogJ2hpZGRlbicsXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZTNkKCR7YW5pbWF0ZWRcbiAgICAgICAgICAgICAgICAgID8gaW50ZXIueDFcbiAgICAgICAgICAgICAgICAgIDogeDF9cHgsICR7YW5pbWF0ZWQgPyBpbnRlci55MSA6IHkxfXB4LCAwcHgpYCxcbiAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPGRpdlxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICBwYWRkaW5nOiAnNXB4JyxcbiAgICAgICAgICAgICAgICAgIGZvbnRTaXplOiAnMTBweCcsXG4gICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAncmdiYSgwLDAsMCwuNiknLFxuICAgICAgICAgICAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICczcHgnLFxuICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGUzZCgke2FsaWduUGN0WH0lLCAke2FsaWduUGN0WX0lLCAwcHgpYCxcbiAgICAgICAgICAgICAgICAgIHdoaXRlU3BhY2U6ICFheGlzLnZlcnRpY2FsICYmICdub3dyYXAnLFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICB7Y2hpbGRyZW4oe1xuICAgICAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+KX1cbiAgICAgIDwvQW5pbWF0ZT5cbiAgICApXG4gIH1cbiAgb25Ib3ZlciAoaG92ZXJlZCwgZSkge1xuICAgIHJldHVybiB0aGlzLnByb3BzLmRpc3BhdGNoKFxuICAgICAgc3RhdGUgPT4gKHtcbiAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgIGhvdmVyZWQsXG4gICAgICB9KSxcbiAgICAgIHtcbiAgICAgICAgdHlwZTogJ2hvdmVyZWQnLFxuICAgICAgfVxuICAgIClcbiAgfVxuICBvbkFjdGl2YXRlIChuZXdBY3RpdmUsIGUpIHtcbiAgICBjb25zdCB7IGFjdGl2ZSwgZGlzcGF0Y2ggfSA9IHRoaXMucHJvcHNcbiAgICBpZiAoYWN0aXZlID09PSBuZXdBY3RpdmUpIHtcbiAgICAgIHJldHVybiBkaXNwYXRjaChcbiAgICAgICAgc3RhdGUgPT4gKHtcbiAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICBhY3RpdmU6IG51bGwsXG4gICAgICAgIH0pLFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ2FjdGl2ZScsXG4gICAgICAgIH1cbiAgICAgIClcbiAgICB9XG4gICAgZGlzcGF0Y2goXG4gICAgICBzdGF0ZSA9PiAoe1xuICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgYWN0aXZlOiBuZXdBY3RpdmUsXG4gICAgICB9KSxcbiAgICAgIHtcbiAgICAgICAgdHlwZTogJ2FjdGl2ZScsXG4gICAgICB9XG4gICAgKVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENvbm5lY3QoXG4gICgpID0+IHtcbiAgICBjb25zdCBzZWxlY3RvcnMgPSB7XG4gICAgICBwcmltYXJ5QXhpczogU2VsZWN0b3JzLnByaW1hcnlBeGlzKCksXG4gICAgICBzZWNvbmRhcnlBeGlzOiBTZWxlY3RvcnMuc2Vjb25kYXJ5QXhpcygpLFxuICAgICAgb2Zmc2V0OiBTZWxlY3RvcnMub2Zmc2V0KCksXG4gICAgICBncmlkWDogU2VsZWN0b3JzLmdyaWRYKCksXG4gICAgICBncmlkWTogU2VsZWN0b3JzLmdyaWRZKCksXG4gICAgfVxuICAgIHJldHVybiBzdGF0ZSA9PiAoe1xuICAgICAgc3RhY2tEYXRhOiBzdGF0ZS5zdGFja0RhdGEsXG4gICAgICBwcmltYXJ5QXhpczogc2VsZWN0b3JzLnByaW1hcnlBeGlzKHN0YXRlKSxcbiAgICAgIHNlY29uZGFyeUF4aXM6IHNlbGVjdG9ycy5zZWNvbmRhcnlBeGlzKHN0YXRlKSxcbiAgICAgIGN1cnNvcjogc3RhdGUuY3Vyc29yLFxuICAgICAgb2Zmc2V0OiBzZWxlY3RvcnMub2Zmc2V0KHN0YXRlKSxcbiAgICAgIGdyaWRYOiBzZWxlY3RvcnMuZ3JpZFgoc3RhdGUpLFxuICAgICAgZ3JpZFk6IHNlbGVjdG9ycy5ncmlkWShzdGF0ZSksXG4gICAgfSlcbiAgfSxcbiAge1xuICAgIHN0YXRpY3M6IHtcbiAgICAgIGlzSFRNTDogdHJ1ZSxcbiAgICB9LFxuICB9XG4pKEN1cnNvcilcblxuLyogPGdcblxuICA+XG5cbiAgPFJlY3RhbmdsZVxuICAgIHgxPXtsYWJlbFgxfVxuICAgIHgyPXtsYWJlbFgyfVxuICAgIHkxPXtsYWJlbFkxfVxuICAgIHkyPXtsYWJlbFkyfVxuICAvPlxuICA8VGV4dFxuICAgIHg9e3gxfVxuICAgIHk9e3kxfVxuICAgIGZvbnRTaXplPXtmb250U2l6ZX1cbiAgICB0ZXh0QW5jaG9yPXtheGlzLnBvc2l0aW9uID09PSAnbGVmdCcgPyAnZW5kJyA6IGF4aXMucG9zaXRpb24gPT09ICdyaWdodCcgPyAnc3RhcnQnIDogJ21pZGRsZSd9XG4gICAgZG9taW5hbnRCYXNlbGluZT17YXhpcy5wb3NpdGlvbiA9PT0gJ3RvcCcgPyAnYWxwaGFiZXRpYycgOiBheGlzLnBvc2l0aW9uID09PSAnYm90dG9tJyA/ICdoYW5naW5nJyA6ICdjZW50cmFsJ31cbiAgPlxuICAgIHtsYWJlbH1cbiAgPC9UZXh0PlxuPC9nPiAqL1xuIl19